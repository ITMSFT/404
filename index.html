<!-- 
*¬© 2024 Yuriy Ostyuchenko üê±üêæ*
*Snake Game for 404 Page*
*–°–æ–∑–¥–∞–Ω–æ —Å –ª—é–±–æ–≤—å—é –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞*
-->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ (404)</title>
    <style>
        /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        body {
            margin: 0;
            padding: 0;
            background-color: #000; /* –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω */
            color: #fff; /* –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç */
            font-family: 'Press Start 2P', cursive; /* 8-–±–∏—Ç–Ω—ã–π —Å—Ç–∏–ª—å —à—Ä–∏—Ñ—Ç–∞ */
            overflow: hidden; /* –°–∫—Ä—ã—Ç—å –ø–æ–ª–æ—Å—ã –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh; /* –í—ã—Å–æ—Ç–∞ —ç–∫—Ä–∞–Ω–∞ */
            position: relative;
        }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        h1 {
            margin-bottom: 20px;
            font-size: 2em;
            text-align: center;
        }

        /* –ö–∞–Ω–≤–∞—Å –¥–ª—è –∏–≥—Ä—ã */
        #gameCanvas {
            border: 2px solid #fff; /* –ë–µ–ª–∞—è —Ä–∞–º–∫–∞ */
            background-color: #111; /* –¢–µ–º–Ω–æ-—Å–µ—Ä—ã–π —Ñ–æ–Ω –∫–∞–Ω–≤–∞—Å–∞ */
            display: none; /* –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç */
        }

        /* –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –∏–≥—Ä–æ–≤–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ */
        #message, #promoCode, #bestScore {
            margin-top: 10px;
            font-size: 1em;
            text-align: center;
        }

        /* –°—Ç–∏–ª—å –ø—Ä–æ–º–æ–∫–æ–¥–∞ */
        #promoCode {
            color: #0f0; /* –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç */
        }

        /* –õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç */
        #bestScore {
            color: #ff0; /* –ñ–µ–ª—Ç—ã–π —Ü–≤–µ—Ç */
        }

        /* –ë–ª–æ–∫ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∏–≥—Ä—ã */
        #rules {
            margin-bottom: 20px;
            max-width: 600px;
            text-align: center;
            font-size: 0.8em;
            line-height: 1.5;
        }

        /* –ö–Ω–æ–ø–∫–∞ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã */
        #startButton {
            padding: 10px 20px;
            font-size: 1em;
            background-color: #0f0; /* –ó–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω */
            color: #000; /* –ß–µ—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç */
            border: none;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.3s;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        /* –•–æ–≤–µ—Ä —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –∫–Ω–æ–ø–∫–∏ */
        #startButton:hover {
            background-color: #0c0; /* –¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç –≤—Å–ø—ã—à–∫–∏ –ø—Ä–∏ —Å–±–æ—Ä–µ –µ–¥—ã */
        .flash {
            animation: flashEffect 0.2s;
        }

        /* –ö–ª—é—á–µ–≤—ã–µ –∫–∞–¥—Ä—ã –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –≤—Å–ø—ã—à–∫–∏ */
        @keyframes flashEffect {
            0% { background-color: #111; }
            50% { background-color: #222; }
            100% { background-color: #111; }
        }

        /* –ò–º–ø–æ—Ä—Ç 8-–±–∏—Ç–Ω–æ–≥–æ —à—Ä–∏—Ñ—Ç–∞ */
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        #controls {
            display: none; /* –°–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
            margin-top: 20px;
        }

        /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .control-button {
            width: 60px;
            height: 60px;
            margin: 5px;
            background-color: #0f0; /* –ó–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω */
            color: #000; /* –ß–µ—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç */
            border: none;
            font-size: 1.5em;
            border-radius: 10px;
            cursor: pointer;
        }

        /* –•–æ–≤–µ—Ä —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
        .control-button:active {
            background-color: #0c0; /* –¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ */
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        @media (max-width: 600px) {
            #controls {
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            .control-row {
                display: flex;
                justify-content: center;
            }

            /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∫–∞–Ω–≤–∞—Å–∞ */
            #gameCanvas {
                width: 80vw;
                height: 80vw;
                max-width: 400px;
                max-height: 400px;
            }
        }
    </style>
</head>
<body>
    <h1>–û–π! –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ (404)</h1>
    
    <!-- –ë–ª–æ–∫ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∏–≥—Ä—ã –∏ –∫–Ω–æ–ø–∫–æ–π –Ω–∞—á–∞–ª–∞ -->
    <div id="rules">
        <p><strong>–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã "–ó–º–µ–π–∫–∞":</strong></p>
        <ul style="list-style: none; padding: 0;">
            <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–µ–ª–∫–∏ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ –∏–ª–∏ –∫–Ω–æ–ø–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–º–µ–π–∫–æ–π.</li>
            <li>–°–æ–±–∏—Ä–∞–π—Ç–µ –∫—Ä–∞—Å–Ω—ã–µ –±–ª–æ–∫–∏, —á—Ç–æ–±—ã —Ä–∞—Å—Ç–∏ –∏ –Ω–∞–±–∏—Ä–∞—Ç—å –æ—á–∫–∏.</li>
            <li>–ö–∞–∂–¥—ã–µ 5 —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤ –∑–º–µ–π–∫–∞ —É—Å–∫–æ—Ä—è–µ—Ç—Å—è.</li>
            <li>–°–æ–±–µ—Ä–∏—Ç–µ 30 –±–ª–æ–∫–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞ –Ω–∞ 1% —Å–∫–∏–¥–∫—É, 60 –±–ª–æ–∫–æ–≤ ‚Äî –Ω–∞ 2% –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–æ 5%.</li>
            <li>–ò–∑–±–µ–≥–∞–π—Ç–µ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º —Ç–µ–ª–æ–º.</li>
            <li>–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–ª—è –≤–∞—à–µ–≥–æ —É–¥–æ–±—Å—Ç–≤–∞.</li>
        </ul>
        <button id="startButton">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
    </div>
    
    <!-- –ö–∞–Ω–≤–∞—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–≥—Ä—ã -->
    <canvas id="gameCanvas" width="400" height="400"></canvas>
    
    <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ —Ö–æ–¥–µ –∏–≥—Ä—ã -->
    <div id="message"></div>
    <div id="promoCode"></div>
    <div id="bestScore"></div>

    <!-- –ö–æ–Ω—Ç—Ä–æ–ª—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
    <div id="controls">
        <div class="control-row">
            <button class="control-button" id="upButton">‚Üë</button>
        </div>
        <div class="control-row">
            <button class="control-button" id="leftButton">‚Üê</button>
            <button class="control-button" id="downButton">‚Üì</button>
            <button class="control-button" id="rightButton">‚Üí</button>
        </div>
    </div>

    <script>
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤
        const eatSound = new Audio('https://freesound.org/data/previews/341/341695_5260877-lq.mp3'); // –ó–≤—É–∫ —Å–±–æ—Ä–∞ –µ–¥—ã
        const gameOverSound = new Audio('https://freesound.org/data/previews/331/331912_3248244-lq.mp3'); // –ó–≤—É–∫ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã
        const bgMusic = new Audio('https://freesound.org/data/previews/256/256113_4486188-lq.mp3'); // –§–æ–Ω–æ–≤–∞—è 8-–±–∏—Ç–Ω–∞—è –º—É–∑—ã–∫–∞

        bgMusic.loop = true; // –ó–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–∏

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫–∞–Ω–≤–∞—Å–∞ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const box = 20; // –†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–π —è—á–µ–π–∫–∏ –∑–º–µ–π–∫–∏ –∏ –µ–¥—ã
        let snake; // –ú–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∑–º–µ–π–∫–∏
        let direction; // –¢–µ–∫—É—â–µ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –∑–º–µ–π–∫–∏
        let food; // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –µ–¥—ã
        let score; // –¢–µ–∫—É—â–∏–π —Å—á–µ—Ç
        let speed; // –¢–µ–∫—É—â–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏–≥—Ä—ã (–∏–Ω—Ç–µ—Ä–≤–∞–ª –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö)
        let gameInterval; // –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–≥—Ä—ã

        // –û–±—ä–µ–∫—Ç —Å –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∫–∏–¥–∫–∞–º–∏
        const promoCodes = {
            30: 'JKDFCHDN',
            60: 'LMNOPQRS',
            90: 'ZXCVBNML',
            120: 'ASDFGHJK',
            150: 'QWERTYUI'
        };

        /**
         * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –∫–ª–∞–≤–∏—à –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–º–µ–π–∫–æ–π
         * @param {KeyboardEvent} event - –°–æ–±—ã—Ç–∏–µ –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à–∏
         */
        function changeDirection(event) {
            const key = event.keyCode;
            if (key === 37 && direction !== 'RIGHT') direction = 'LEFT'; // –í–ª–µ–≤–æ
            else if (key === 38 && direction !== 'DOWN') direction = 'UP'; // –í–≤–µ—Ä—Ö
            else if (key === 39 && direction !== 'LEFT') direction = 'RIGHT'; // –í–ø—Ä–∞–≤–æ
            else if (key === 40 && direction !== 'UP') direction = 'DOWN'; // –í–Ω–∏–∑
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        document.addEventListener('keydown', changeDirection);

        /**
         * –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
         */
        document.getElementById('upButton').addEventListener('click', () => {
            if (direction !== 'DOWN') direction = 'UP';
        });

        document.getElementById('leftButton').addEventListener('click', () => {
            if (direction !== 'RIGHT') direction = 'LEFT';
        });

        document.getElementById('downButton').addEventListener('click', () => {
            if (direction !== 'UP') direction = 'DOWN';
        });

        document.getElementById('rightButton').addEventListener('click', () => {
            if (direction !== 'LEFT') direction = 'RIGHT';
        });

        /**
         * –§—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–≥—Ä—ã
         */
        function initGame() {
            // –°–∫—Ä—ã—Ç—å –±–ª–æ–∫ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–æ–π –Ω–∞—á–∞–ª–∞
            document.getElementById('rules').style.display = 'none';
            // –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞–Ω–≤–∞—Å –¥–ª—è –∏–≥—Ä—ã
            canvas.style.display = 'block';
            // –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
            if (window.innerWidth <= 600) {
                document.getElementById('controls').style.display = 'flex';
                document.getElementById('controls').style.flexDirection = 'column';
                document.getElementById('controls').style.alignItems = 'center';
            }
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–º–µ–π–∫–∏
            snake = [{x: 9 * box, y: 10 * box}]; // –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –∑–º–µ–π–∫–∏
            direction = 'RIGHT'; // –ù–∞—á–∞–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            food = generateFood(); // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä–≤–æ–π –µ–¥—ã
            score = 0; // –û–±–Ω—É–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞
            speed = 200; // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
            // –û—á–∏—Å—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –∏ —Å—á–µ—Ç—á–∏–∫–∞
            document.getElementById('promoCode').innerText = '';
            document.getElementById('message').innerText = `–°–æ–±—Ä–∞–Ω–æ –±–ª–æ–∫–æ–≤: ${score}`;
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            displayBestScore();
            // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–∏
            bgMusic.play();
            // –ó–∞–ø—É—Å–∫ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
            gameInterval = setInterval(draw, speed);
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã
        document.getElementById('startButton').addEventListener('click', initGame);

        /**
         * –§—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∏–≥—Ä—ã
         */
        function draw() {
            // –û—á–∏—Å—Ç–∫–∞ –∫–∞–Ω–≤–∞—Å–∞ –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –µ–≥–æ —Ü–≤–µ—Ç–æ–º —Ñ–æ–Ω–∞
            ctx.fillStyle = '#111';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∑–º–µ–π–∫–∏
            for (let i = 0; i < snake.length; i++) {
                ctx.fillStyle = (i === 0) ? '#0f0' : '#fff'; // –ì–æ–ª–æ–≤–∞ –∑–º–µ–π–∫–∏ –∑–µ–ª–µ–Ω–∞—è, —Ç–µ–ª–æ –±–µ–ª–æ–µ
                ctx.fillRect(snake[i].x, snake[i].y, box, box); // –†–∏—Å–æ–≤–∞–Ω–∏–µ –∫–≤–∞–¥—Ä–∞—Ç–∞ –∑–º–µ–π–∫–∏
                ctx.strokeStyle = '#000'; // –ß–µ—Ä–Ω–∞—è –æ–±–≤–æ–¥–∫–∞
                ctx.strokeRect(snake[i].x, snake[i].y, box, box); // –†–∏—Å–æ–≤–∞–Ω–∏–µ –æ–±–≤–æ–¥–∫–∏
            }

            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –µ–¥—ã
            ctx.fillStyle = '#f00'; // –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç
            ctx.fillRect(food.x, food.y, box, box); // –†–∏—Å–æ–≤–∞–Ω–∏–µ –∫–≤–∞–¥—Ä–∞—Ç–∞ –µ–¥—ã

            // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ –≥–æ–ª–æ–≤—ã –∑–º–µ–π–∫–∏
            let snakeX = snake[0].x;
            let snakeY = snake[0].y;

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –≥–æ–ª–æ–≤—ã –∑–º–µ–π–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            if (direction === 'LEFT') snakeX -= box;
            if (direction === 'UP') snakeY -= box;
            if (direction === 'RIGHT') snakeX += box;
            if (direction === 'DOWN') snakeY += box;

            // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –≥–æ–ª–æ–≤—ã –∑–º–µ–π–∫–∏
            let newHead = {x: snakeX, y: snakeY};

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –∏–ª–∏ —Å–∞–º–∏–º —Å–æ–±–æ–π
            if (snakeX < 0 || snakeX >= canvas.width || snakeY < 0 || snakeY >= canvas.height || collision(newHead, snake)) {
                // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã
                gameOverSound.play();
                // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
                clearInterval(gameInterval);
                // –ü–∞—É–∑–∞ —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–∏
                bgMusic.pause();
                // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–≥—Ä—ã
                document.getElementById('message').innerText = '–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.';
                // –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã
                document.getElementById('startButton').style.display = 'block';
                // –°–∫—Ä—ã—Ç—å –∫–∞–Ω–≤–∞—Å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—ã
                canvas.style.display = 'none';
                document.getElementById('controls').style.display = 'none';
                // –ü–æ–∫–∞–∑–∞—Ç—å –±–ª–æ–∫ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏
                document.getElementById('rules').style.display = 'block';
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
                updateBestScore();
                return; // –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–±–æ—Ä –µ–¥—ã
            if (snakeX === food.x && snakeY === food.y) {
                // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–∞ —Å–±–æ—Ä–∞ –µ–¥—ã
                eatSound.currentTime = 0;
                eatSound.play();
                // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á–µ—Ç–∞
                score++;
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –≥–æ–ª–æ–≤—ã –∑–º–µ–π–∫–∏ –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è —Ö–≤–æ—Å—Ç–∞ (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã)
                snake.unshift(newHead);
                // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–π –µ–¥—ã
                food = generateFood();
                // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –≤—Å–ø—ã—à–∫–∏
                flashEffect();

                // –£—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–º–µ–π–∫–∏ –∫–∞–∂–¥—ã–µ 5 —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤
                if (score % 5 === 0 && speed > 50) {
                    clearInterval(gameInterval); // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
                    speed -= 20; // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
                    gameInterval = setInterval(draw, speed); // –ó–∞–ø—É—Å–∫ –Ω–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é
                }

                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞
                if (promoCodes[score]) {
                    document.getElementById('promoCode').innerText = `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í–∞—à –ø—Ä–æ–º–æ–∫–æ–¥: ${promoCodes[score]} –Ω–∞ —Å–∫–∏–¥–∫—É ${score / 30}%.`;
                }
            } else {
                // –ï—Å–ª–∏ –µ–¥–∞ –Ω–µ —Å–æ–±—Ä–∞–Ω–∞, —É–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –∑–º–µ–π–∫–∏
                snake.pop();
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –≥–æ–ª–æ–≤—É
                snake.unshift(newHead);
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ç–µ–∫—É—â–µ–º —Å—á–µ—Ç–µ
            document.getElementById('message').innerText = `–°–æ–±—Ä–∞–Ω–æ –±–ª–æ–∫–æ–≤: ${score}`;
        }

        /**
         * –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è –≥–æ–ª–æ–≤—ã –∑–º–µ–π–∫–∏ —Å —Ç–µ–ª–æ–º
         * @param {Object} head - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≥–æ–ª–æ–≤—ã –∑–º–µ–π–∫–∏
         * @param {Array} array - –ú–∞—Å—Å–∏–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ç–µ–ª–∞ –∑–º–µ–π–∫–∏
         * @returns {boolean} - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç true, –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–æ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ
         */
        function collision(head, array) {
            for (let i = 0; i < array.length; i++) {
                if (head.x === array[i].x && head.y === array[i].y) {
                    return true; // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ
                }
            }
            return false; // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π –Ω–µ—Ç
        }

        /**
         * –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–π –µ–¥—ã –Ω–∞ —Å–≤–æ–±–æ–¥–Ω–æ–π –∫–ª–µ—Ç–∫–µ
         * @returns {Object} - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–æ–≤–æ–π –µ–¥—ã
         */
        function generateFood() {
            let newFood;
            let collisionDetected;
            do {
                newFood = {
                    x: Math.floor(Math.random() * (canvas.width / box)) * box, // –°–ª—É—á–∞–π–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –ø–æ X
                    y: Math.floor(Math.random() * (canvas.height / box)) * box // –°–ª—É—á–∞–π–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –ø–æ Y
                };
                collisionDetected = collision(newFood, snake); // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å —Ç–µ–ª–æ–º –∑–º–µ–π–∫–∏
            } while (collisionDetected); // –ü–æ–≤—Ç–æ—Ä—è—Ç—å –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –µ–¥–∞ –Ω–µ –æ–∫–∞–∂–µ—Ç—Å—è –Ω–∞ —Å–≤–æ–±–æ–¥–Ω–æ–π –∫–ª–µ—Ç–∫–µ
            return newFood;
        }

        /**
         * –§—É–Ω–∫—Ü–∏—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ –≤—Å–ø—ã—à–∫–∏ —ç–∫—Ä–∞–Ω–∞ –ø—Ä–∏ —Å–±–æ—Ä–µ –µ–¥—ã
         */
        function flashEffect() {
            document.body.classList.add('flash'); // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => {
                document.body.classList.remove('flash'); // –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
            }, 200); // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –≤—Å–ø—ã—à–∫–∏ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ)
        const style = document.createElement('style');
        style.innerHTML = `
            .flash {
                animation: flashEffect 0.2s;
            }
        `;
        document.head.appendChild(style);

        /**
         * –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –≤ localStorage
         */
        function displayBestScore() {
            const bestScore = localStorage.getItem('bestScore') || 0; // –ü–æ–ª—É—á–µ–Ω–∏–µ –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏–ª–∏ 0
            document.getElementById('bestScore').innerText = `–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${bestScore}`;
        }

        /**
         * –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ localStorage
         */
        function updateBestScore() {
            const bestScore = localStorage.getItem('bestScore') || 0; // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            if (score > bestScore) { // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Ç–µ–∫—É—â–∏–º —Å—á–µ—Ç–æ–º
                localStorage.setItem('bestScore', score); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
                document.getElementById('bestScore').innerText = `–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score}`; // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
                alert('–ù–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥!'); // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            }
        }
    </script>
</body>
</html>
